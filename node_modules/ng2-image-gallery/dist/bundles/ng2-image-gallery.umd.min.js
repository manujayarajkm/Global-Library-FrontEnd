!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core"),require("ng2-dragula"),require("@angular/common"),require("@angular/material")):"function"==typeof define&&define.amd?define(["exports","@angular/core","ng2-dragula","@angular/common","@angular/material"],n):n(e["ng2-image-gallery"]=e["ng2-image-gallery"]||{},e.ng.core,e.ng2Dragula,e.ng.common,e.ng.material)}(this,function(e,n,t,a,i){"use strict";var r=function(){function e(e){var t=this;this.dragulaService=e,this.images=[],this.draggable=!1,this.asImage="image",this.asThumbnail="thumbnail",this.asText="text",this.actionText="",this.actionEmitter=new n.EventEmitter,this.dropEmitter=new n.EventEmitter,this.loading=!1,this.curImageIndex=0,this.curThumbnailIndex=0,this.isLightboxOpen=!1,e.drop.subscribe(function(e){t.onDrop(e.slice(1))})}return e.prototype.ngOnChanges=function(e){e.images&&(this.images=e.images.currentValue)},e.prototype.openLightboxGallery=function(e){var n=this;this.isLightboxOpen=!0,setTimeout(function(){n.curImageIndex=e-1,n.nextImage(),n.loading=!1},0)},e.prototype.closeLightboxGallery=function(){this.isLightboxOpen=!1},e.prototype.nextImage=function(){this.curImageIndex!==this.images.length-1&&(this.loading=!0,this.curImageIndex++,this.curThumbnailIndex=this.curImageIndex)},e.prototype.previousImage=function(){this.loading=!0,0!==this.curImageIndex&&this.curImageIndex--,this.curThumbnailIndex=this.curImageIndex},e.prototype.toImage=function(e){this.loading=!0,this.curImageIndex=e,this.curThumbnailIndex=this.curImageIndex},e.prototype.thumbnailsNext=function(){this.curThumbnailIndex+5<this.images.length?this.curThumbnailIndex+=5:this.curThumbnailIndex=this.images.length-1,this.curThumbnailIndex+=5},e.prototype.thumbnailsPrevious=function(){this.curThumbnailIndex-5>0?this.curThumbnailIndex-=5:this.curThumbnailIndex=0},e.prototype.onLoad=function(){this.loading=!1},e.prototype.onAction=function(e){this.actionEmitter.emit({image:e})},e.prototype.onDrop=function(e){e[0],e[1];this.dropEmitter.emit({images:this.images})},e}();r.decorators=[{type:n.Component,args:[{selector:"ng2-image-gallery",template:'\n    <div class="ng2-image-gallery-thumbnails" *ngIf="!draggable">\n        <div *ngFor="let image of images; let index=index" class="ng2-image-gallery-thumbnail-container">\n            <img [src]="image[asThumbnail]" (click)="openLightboxGallery(index)" class="ng2-image-gallery-thumbnail">\n            <button class="btn btn-primary ng2-image-gallery-action" *ngIf="actionText!==\'\'" (click)="onAction(image)" [innerHTML]="actionText"></button>\n        </div>\n    </div>\n    <div class="ng2-image-gallery-thumbnails" [dragula]="\'ng2-image-gallery-bag\'" [dragulaModel]=\'images\' *ngIf="draggable">\n        <div *ngFor="let image of images; let index=index" class="ng2-image-gallery-thumbnail-container">\n            <img [src]="image[asThumbnail]" (click)="openLightboxGallery(index)" class="ng2-image-gallery-thumbnail">\n            <button class="btn btn-primary ng2-image-gallery-action" *ngIf="actionText!==\'\'" (click)="onAction(image)" [innerHTML]="actionText"></button>\n        </div>\n    </div>\n    <to-body-displacer>\n        <div class="ng2-image-gallery-overlay" [hidden]="!isLightboxOpen">\n            <div class="ng2-image-gallery-lightbox">\n                <a class="ng2-igl-close" (click)="closeLightboxGallery()"><i class="fa fa-close"></i></a>\n                <a class="ng2-igl-nav-left" *ngIf="images.length >1 && curImageIndex!==0" (click)="previousImage()"><i class="fa fa-angle-left"></i></a>\n                <img [hidden]="loading" *ngIf="images.length>0" [src]="images[curImageIndex][asImage]" (click)="nextImage()" class="ng2-igl-img" (load)="onLoad()" />\n                <span [hidden]="!loading" *ngIf="images.length>0" class="ng2-igl-loading"><i class="fa fa-spinner fa-spin fa-3x" aria-hidden="true"></i></span>\n                <a class="ng2-igl-nav-right" *ngIf="images.length >1 && curImageIndex!==images.length-1" (click)="nextImage()"><i class="fa fa-angle-right"></i></a>\n                <span class="ng2-igl-text" *ngIf="images.length>0" [innerHTML]="images[curImageIndex][asText]"></span>\n                <span class="ng2-igl-count">{{curImageIndex+1}}/{{images.length}}</span>\n                <div class="ng2-igl-thumbnails">\n                    <a class="ng2-igl-nav-left thumbnails" [ngClass]="{\'non-visible\': curThumbnailIndex < 4 }" (click)="thumbnailsPrevious()"><i class="fa fa-angle-left"></i></a>\n                    <ng-template ngFor let-image [ngForOf]="images" let-index="index">\n                        <img [src]="image[asThumbnail]" (click)="toImage(index)" \n                            *ngIf="(curThumbnailIndex>images.length-4 && index > images.length-8)||(curThumbnailIndex<4 && index < 7)||(index >= curThumbnailIndex -3) && (index <= curThumbnailIndex+3)"\n                            [ngClass]="{\'active\':curImageIndex===index}"\n                            class="ng2-igl-thumbnail rounded-circle">\n                    </ng-template>\n                    <a class="ng2-igl-nav-right thumbnails" [ngClass]="{\'non-visible\': curThumbnailIndex > images.length-5 }" (click)="thumbnailsNext()"><i class="fa fa-angle-right"></i></a>\n                </div>\n            </div>\n        </div>\n    </to-body-displacer>'}]}],r.ctorParameters=function(){return[{type:t.DragulaService,decorators:[{type:n.Inject,args:[n.forwardRef(function(){return t.DragulaService})]}]}]},r.propDecorators={images:[{type:n.Input}],draggable:[{type:n.Input,args:["draggable"]}],asImage:[{type:n.Input,args:["asImage"]}],asThumbnail:[{type:n.Input,args:["asThumbnail"]}],asText:[{type:n.Input,args:["asText"]}],actionText:[{type:n.Input,args:["actionText"]}],actionEmitter:[{type:n.Output,args:["onAction"]}],dropEmitter:[{type:n.Output,args:["onDrop"]}]};var o=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function a(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}}(),g=function(e){function n(n,t){return e.call(this,n,t)||this}return o(n,e),n}(i.TemplatePortal);g.decorators=[{type:n.Directive,args:[{selector:"[displacerPortal]"}]}],g.ctorParameters=function(){return[{type:n.TemplateRef,decorators:[{type:n.Inject,args:[n.forwardRef(function(){return n.TemplateRef})]}]},{type:n.ViewContainerRef,decorators:[{type:n.Inject,args:[n.forwardRef(function(){return n.ViewContainerRef})]}]}]};var l=function(){function e(e){this._overlay=e,this._config=new i.OverlayConfig,this._overlayRef=void 0}return e.prototype.ngOnDestroy=function(){this._overlayRef.detach()},e.prototype.ngAfterViewInit=function(){this._overlayRef=this._overlay.create(this._config),this._overlayRef.attach(this._portal)},e}();l.decorators=[{type:n.Component,args:[{selector:"to-body-displacer",template:"<ng-template displacerPortal>\n  <ng-content></ng-content>\n  </ng-template>"}]}],l.ctorParameters=function(){return[{type:i.Overlay,decorators:[{type:n.Inject,args:[n.forwardRef(function(){return i.Overlay})]}]}]},l.propDecorators={_portal:[{type:n.ViewChild,args:[g]}]};var s=function(){return function(){}}();s.decorators=[{type:n.NgModule,args:[{imports:[a.CommonModule,t.DragulaModule,i.PortalModule,i.OverlayModule],declarations:[g,l,r],exports:[r]}]}],s.ctorParameters=function(){return[]},e.Ng2ImageGalleryComponent=r,e.Ng2ImageGalleryModule=s,e.DisplacerComponent=l,e.DisplacerPortalDirective=g,Object.defineProperty(e,"__esModule",{value:!0})});