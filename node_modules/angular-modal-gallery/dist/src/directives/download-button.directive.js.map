{"version":3,"sources":["../../../src/directives/download-button.directive.ts"],"names":[],"mappings":";;;;;;;;;AAAA,OAAO,EAAE,SAAA,EAAW,UAAA,EAAY,KAAA,EAAyC,QAAA,EAAS,MAAO,eAAA,CAAgB;AAIzG;;;;;;GAMG;AAIH,IAAa,uBAAuB;IAOlC,iCAAoB,QAAkB,EAAU,EAAc;QAA1C,aAAQ,GAAR,QAAQ,CAAU;QAAU,OAAE,GAAF,EAAE,CAAY;QAFtD,UAAK,GAAW,EAAE,CAAC;IAEsC,CAAC;IAElE,0CAAQ,GAAR;QACE,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;IAED,6CAAW,GAAX,UAAY,OAAsB;QAChC,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;IAEO,4CAAU,GAAlB;QACE,IAAI,KAAK,GAAW,CAAC,CAAC;QACtB,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,CAAC;YACtD,KAAK,GAAG,IAAI,CAAC,wBAAwB,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;QACvD,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,KAAK,GAAG,CAAC,CAAC;QACZ,CAAC;QACD,iDAAiD;QACjD,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE,OAAO,EAAK,KAAK,OAAI,CAAC,CAAC;QAG5E,yDAAyD;QACzD,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE,QAAQ,EAAE,CAAC,IAAI,CAAC,aAAa,IAAI,CAAC,IAAI,CAAC,aAAa,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,CAAC;IACjJ,CAAC;IAEO,0DAAwB,GAAhC;QACE,IAAI,GAAG,GAAW,CAAC,CAAC;QACpB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;YACxB,MAAM,CAAC,GAAG,CAAC;QACb,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YAChD,GAAG,EAAE,CAAC;QACR,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,KAAK,SAAS,IAAI,IAAI,CAAC,aAAa,CAAC,KAAK,KAAK,IAAI,CAAC,CAAC,CAAC;YAChF,GAAG,EAAE,CAAC;QACR,CAAC;QAED,MAAM,CAAC,GAAG,CAAC;IACb,CAAC;IACH,8BAAC;AAAD,CAhDA,AAgDC,IAAA;AA9CU;IAAR,KAAK,EAAE;;8DAA8B;AAC7B;IAAR,KAAK,EAAE;;0DAA0B;AAHvB,uBAAuB;IAHnC,SAAS,CAAC;QACT,QAAQ,EAAE,mBAAmB;KAC9B,CAAC;qCAQ8B,QAAQ,EAAc,UAAU;GAPnD,uBAAuB,CAgDnC;SAhDY,uBAAuB","file":"download-button.directive.js","sourceRoot":"","sourcesContent":["import { Directive, ElementRef, Input, OnChanges, SimpleChanges, OnInit, Renderer } from '@angular/core';\n\nimport { ButtonsConfig } from '../interfaces/buttons-config.interface';\n\n/**\n * Directive to display the download button.\n * To show this button, you must provide a ButtonsConfig object with 'download: true' as property.\n * All other configurations will hide this button.\n * Pay attention, because this directive is quite smart to choose button's order using the\n * correct right margin in pixels. To do that, it uses also imgExtUrl and configButtons.\n */\n@Directive({\n  selector: '[download-button]'\n})\nexport class DownloadButtonDirective implements OnInit, OnChanges {\n\n  @Input() configButtons: ButtonsConfig;\n  @Input() imgExtUrl: string | void;\n\n  private RIGHT: number = 63;\n\n  constructor(private renderer: Renderer, private el: ElementRef) {}\n\n  ngOnInit() {\n    this.applyStyle();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    this.applyStyle();\n  }\n\n  private applyStyle() {\n    let right: number = 0;\n    if (this.configButtons && this.configButtons.download) {\n      right = this.getNumOfPrecedingButtons() * this.RIGHT;\n    } else {\n      right = 0;\n    }\n    // apply [style.right]=\"\" to download url <a></a>\n    this.renderer.setElementStyle(this.el.nativeElement, 'right', `${right}px`);\n\n\n    // hide downloadButton if configButtons.download is false\n    this.renderer.setElementProperty(this.el.nativeElement, 'hidden', !this.configButtons || (this.configButtons && !this.configButtons.download));\n  }\n\n  private getNumOfPrecedingButtons() {\n    let num: number = 0;\n    if (!this.configButtons) {\n      return num;\n    }\n\n    if (this.configButtons.extUrl && this.imgExtUrl) {\n      num++;\n    }\n\n    if (this.configButtons.close === undefined || this.configButtons.close === true) {\n      num++;\n    }\n\n    return num;\n  }\n}\n"]}